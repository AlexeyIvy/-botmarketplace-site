# Цели, не-цели, допущения, ограничения

Документ фиксирует, что мы строим в MVP, что сознательно откладываем, и какие ограничения учитываем при проектировании.

## 1) Цели проекта (Goals)

- Создать веб-приложение (терминал) для торговли деривативами Bybit с базовыми функциями как у торгового терминала: выбор инструмента, свечи, ручные ордера, обзор позиции/ордеров.
- Добавить AI-чат, который помогает пользователю формализовать стратегию, генерируя структурированный Strategy Spec (JSON/DSL), и запускать торгового бота на ограниченное время.
- В MVP обеспечить безопасный контур: обязательные SL/TP, риск-лимиты, кнопка Stop, журнал событий и воспроизводимость действий.

## 2) MVP-границы (Scope MVP)

### 2.1 Что входит в MVP (In scope)
- Рынок по умолчанию: `linear` (USDT perpetual).
- Инструменты: пользователь может выбрать любой доступный `linear` инструмент из instruments-info.
- Окружение: Bybit Demo Trading (только demo в MVP, real выключен флагом).
- Ручная торговля: market + limit ордера.
- SL/TP: обязательны; режим по умолчанию — Bybit `Set Trading Stop`.
- Боты:
  - CRUD ботов (создать/редактировать/удалить).
  - Запуск по кнопке на N минут, остановка вручную, авто-остановка по таймауту.
  - Логи: события стратегии/ордеров/позиции, ошибки, реконнекты.
- Интерфейс: RU + EN (документация проекта — RU).

### 2.2 Что НЕ входит в MVP (Out of scope)
- Реальная торговля (real env), ввод/вывод средств.
- Мульти-пользовательский режим с регистрацией/подписками/платежами.
- Публичный маркетплейс стратегий/ботов, копирование сделок, социальные функции.
- “AI пишет произвольный код стратегии” и запускает его без ограничений — в MVP только DSL/конструктор.
- Высокоточная/низколатентная торговля (HFT), арбитраж, маркет-мейкинг.
- Мульти-биржи (Binance/OKX и т.п.).
- Полная функциональность MT4 (индикаторы/скрипты/маркет/исторические тестеры в полном объёме).

## 3) Допущения (Assumptions)

- У пользователя есть Bybit аккаунт и возможность включить Demo Trading для получения demo API ключей.
- Торговые правила и возможности в demo схожи с real, но demo имеет ограничения по полноте функций.
- Публичные данные рынка (тикеры/трейды/свечи) берём из публичных источников Bybit; приватные данные (позиции/ордера/баланс) — из demo private endpoint’ов.

## 4) Ограничения (Constraints)

- Demo Trading ограничения:
  - Не все API доступны в demo, т.к. demo предназначен в основном для торгового опыта.
  - Ордера, созданные в demo, хранятся 7 дней.
  - Rate limit demo — “по умолчанию” и не апгрейдится.
  - Для demo private streams используется `wss://stream-demo.bybit.com`, а public data идентичны mainnet (public WS на `wss://stream.bybit.com`), при этом WS Trade в demo не поддерживается.
  (См. официальную документацию Demo Trading Service.)
- Любая автоматическая торговля должна иметь риск-ограничения и аварийную остановку.
- Проект должен проектироваться так, чтобы расширение на multi-user не ломало модели данных и авторизацию:
  - Уже в MVP все сущности имеют `userId`/`workspaceId`,
  - Любой доступ по ID проверяет object-level authorization.

## 5) Критерии успеха MVP (Success Criteria)

- Терминал доступен по домену, пользователь выбирает любой `linear` инструмент и видит актуальные данные (цена + свечи).
- Пользователь может подключить demo ключ и выполнить ручную сделку market/limit с обязательными SL/TP.
- Пользователь может создать бота через AI-чат (генерация Strategy Spec), запустить на demo на N минут и получить логи/результат запуска.
- Присутствуют базовые защиты от ошибок: лимиты, корректные реконнекты WS, отсутствие утечек секретов в UI/логи.
